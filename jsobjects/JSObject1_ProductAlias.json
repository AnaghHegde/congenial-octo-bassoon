{
  "unpublishedCollection": {
    "name": "JSObject1",
    "pageId": "ProductAlias",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tInit:() =>{\n\t\tif(Tabs_ProductAlias.selectedTab == 'Batch Create Product Alias'){\n\t\t\tstoreValue(\"Key_Alias_UserPayload\", '');\n\t\t\tstoreValue(\"Key_Alias_UserProductId\", '');\n\t\t\tstoreValue('Key_AddAlias_Response', '');\n\t\t\tstoreValue('Key_AddAlias_APIFail', '');\n\t\t}\n\t\telse if (Tabs_ProductAlias.selectedTab == 'Batch Update Product Alias'){\n\t\t\tstoreValue('Key_UpdateAlias_Response', '');\n\t\t\tstoreValue('Key_UpdateAlias_APIFail', '');\n\t\t\tstoreValue(\"Key_UpdateAlias_UserPayload\", '');\n\t\t}\n\t\telse if (Tabs_ProductAlias.selectedTab == 'Get Product Alias'){\n\t\t\tstoreValue('Key_GetAliasesList', '');\n\t\t\tstoreValue('key_SelectedProduct','');\n\t\t}\n\t},\n\tGetAliases:() =>{\n\t\tGetProductAlias.run(\n\t\t\t() => {storeValue('Key_GetAliasesList', GetProductAlias.data);},\n\t\t\t() => {showAlert('Something went wrong - Can t retrieve Product Aliases'); storeValue('Key_GetAliasesList', '');}\n\t\t)\n\t},\n\tCreateNewGsheet: () =>{\n\t\tif(CreateGSheet_ProductAlias.data.webViewLink != null){\n\t\t\tnavigateTo(CreateGSheet_ProductAlias.data.webViewLink,{},'NEW_WINDOW');\n\t\t}\n\t\telse{\n\t\t\tCreateGSheet_ProductAlias.run(\n\t\t\t\t// success\n\t\t\t\t() => {storeValue('Key_URLCreateProductAlias', CreateGSheet_ProductAlias.data.webViewLink);\n\t\t\t\t\t\t\t navigateTo(CreateGSheet_ProductAlias.data.webViewLink,{},'NEW_WINDOW');},\n\t\t\t\t//fail\n\t\t\t\t() => {storeValue('Key_URLCreateProductAlias', '');showAlert(\"Fail\");}\n\t\t\t)\n\t\t}\n\t},\t\n\tCheckAliases:()=>{\n\t\tGetGSheetContent_ProductAlias.run(\n\t\t\t//success\n\t\t\t() => {\n\t\t\t\tlet array_payload=[];\t\t\n\t\t\t\tlet APIdata = [];\n\t\t\t\tAPIdata = GetGSheetContent_ProductAlias.data.values;\n\t\t\t\tfor (let i=1;i<APIdata.length;i++){\n\t\t\t\t\tarray_payload.push({\n\t\t\t\t\t\t\"alias\": APIdata[i][0],\n\t\t\t\t\t\t\"productId\": APIdata[i][1],\n\t\t\t\t\t\t\"providerId\": ((APIdata[i][2]==null||APIdata[i][2]==\"\")?null:APIdata[i][2]),\n\t\t\t\t\t\t\"sourceId\": ((APIdata[i][3]==null||APIdata[i][3]==\"\")?null:APIdata[i][3])\n\t\t\t\t\t})\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tstoreValue(\"Key_Alias_UserPayload\", array_payload);\n\t\t\t},\n\t\t\t//fail\n\t\t\t() => {showAlert(\"Something went wrong - Data not inserted\")}\t\t\t\n\t\t)\n\t},\n\tAddAliases:()=>{\n\t\tAddProductAlias.run(\n\t\t\t// success\n\t\t\t() => {storeValue('Key_AddAlias_Response', AddProductAlias.data);storeValue('Key_AddAlias_APIFail', \"\");}, \n\t\t\t//fail\n\t\t\t() => {storeValue('Key_AddAlias_Response', \"\");storeValue('Key_AddAlias_APIFail', AddProductAlias.data.message);})\n\t},\n\tCreateNewGsheet_Update: () =>{\n\t\tif(CreateGSheet_UpdateAlias.data.webViewLink != null){\n\t\t\tnavigateTo(CreateGSheet_UpdateAlias.data.webViewLink,{},'NEW_WINDOW');\n\t\t}\n\t\telse{\n\t\t\tCreateGSheet_UpdateAlias.run(\n\t\t\t\t// success\n\t\t\t\t() => {storeValue('Key_URLUpdateProductAlias', CreateGSheet_UpdateAlias.data.webViewLink);\n\t\t\t\t\t\t\t navigateTo(CreateGSheet_UpdateAlias.data.webViewLink,{},'NEW_WINDOW');},\n\t\t\t\t//fail\n\t\t\t\t() => {storeValue('Key_URLUpdateProductAlias', '');showAlert(\"Fail\");}\n\t\t\t)\n\t\t}\n\t},\t\n\tCheckAliases_Update:()=>{\n\t\tGetGSheetContent_UpdateAlias.run(\n\t\t\t//success\n\t\t\t() => {\n\t\t\t\tlet array_payload=[];\t\t\n\t\t\t\tlet APIdata = [];\n\t\t\t\tAPIdata = GetGSheetContent_UpdateAlias.data.values;\n\t\t\t\tfor (let i=1;i<APIdata.length;i++){\n\t\t\t\t\tarray_payload.push({\n\t\t\t\t\t\t\"id\" : APIdata[i][0],\n\t\t\t\t\t\t\"alias\": APIdata[i][1],\n\t\t\t\t\t\t\"productId\": APIdata[i][2],\n\t\t\t\t\t\t\"providerId\": ((APIdata[i][3]==null||APIdata[i][3]==\"\")?null:APIdata[i][3]),\n\t\t\t\t\t\t\"sourceId\": ((APIdata[i][4]==null||APIdata[4][1]==\"\")?null:APIdata[i][4])\n\t\t\t\t\t})\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tstoreValue(\"Key_UpdateAlias_UserPayload\", array_payload);\n\t\t\t},\n\t\t\t//fail\n\t\t\t() => {showAlert(\"Something went wrong - Data not inserted\")}\t\t\t\n\t\t)\n\t},\t\n\tUpdateAliases:()=>{\n\t\tUpdateProductAlias.run(\n\t\t\t// success\n\t\t\t() => {storeValue('Key_UpdateAlias_Response', UpdateProductAlias.data);storeValue('Key_UpdateAlias_APIFail', \"\");}, \n\t\t\t//fail\n\t\t\t() => {storeValue('Key_UpdateAlias_Response', \"\");storeValue('Key_UpdateAlias_APIFail', UpdateProductAlias.data.message);})\n\t},\n\tDeleteAlias:()=>{\n\t\tDeleteProductAlias.run(\n\t\t\t//success\n\t\t\t() => {JSObject1.GetAliases(); closeModal('Modal_Delete')},\n\t\t\t//fail\n\t\t\t() => {showAlert(\"Something went wrong - Can't delete Product Edit_Alias\");closeModal('Modal_Delete')}\n\t\t)\n\t},\n\tAddSingleAlias2:()=>{\n\t\t// build payload\t\t\n\t\tlet array_payload=[];\n\t\tarray_payload.push({\n\t\t\t\"alias\": Add_Alias.text,\n\t\t\t\"productId\":Add_ProductId.text,\n\t\t\t\"providerId\": ((Add_ProviderId.text==null||Add_ProviderId.text==\"\")?null:Add_ProviderId.text),\n\t\t\t\"sourceId\": ((Add_SourceId.text==null||Add_SourceId.text==\"\")?null:Add_SourceId.text)\n\t\t})\t\t\t\t\t\t\n\t\tstoreValue(\"Key_Alias_UserPayload\", array_payload);\n\t\t\n\t\tAddProductAlias.run(\n\t\t\t// success\n\t\t\t() => {\n\t\t\t\tif (AddProductAlias.data[0].statuses[0].status_code>=400) {\n\t\t\t\t\tshowAlert(JSON.stringify(AddProductAlias.data[0].statuses[0].message));\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tJSObject1.GetAliases(); \n\t\t\t\t\tcloseModal('Modal_Add');\n\t\t\t\t}\n\t\t\t\t},\t\t\t\t\n\t\t\t//fail\n\t\t\t() => {showAlert(JSON.stringify(AddProductAlias.data.message)); })\n\t},\n\tUpdateSingleAlias:()=>{\n\t\t// build payload\n\t\t\n\t\tlet update_response=[];\n\t\tlet array_payload=[];\n\t\tarray_payload.push({\n\t\t\t\"id\" : Table3.selectedRow.id,\n\t\t\t\"alias\": Table3.selectedRow.alias,\n\t\t\t\"productId\":Edit_ProductId.text,\n\t\t\t\"providerId\": ((Edit_ProviderId.text==null||Edit_ProviderId.text==\"\")?null:Edit_ProviderId.text),\n\t\t\t\"sourceId\": ((Edit_SourceId.text==null||Edit_SourceId.text==\"\")?null:Edit_SourceId.text)\n\t\t})\t\t\t\t\t\t\n\t\tstoreValue(\"Key_UpdateAlias_UserPayload\", array_payload);\n\t\t\n\t\tUpdateProductAlias.run(\n\t\t\t// success\n\t\t\t() => {\n\t\t\t\t//update_response = UpdateProductAlias.data;\n\t\t\t\tif (UpdateProductAlias.data[0].statuses[0].status_code>=400) {\n\t\t\t\t\tshowAlert(JSON.stringify(UpdateProductAlias.data[0].statuses[0].message));\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tJSObject1.GetAliases(); \n\t\t\t\t\tcloseModal('Modal_Edit');\n\t\t\t\t}\n\t\t\t\t},\t\t\t\t\n\t\t\t//fail\n\t\t\t() => {showAlert(JSON.stringify(UpdateProductAlias.data.message)); })\n\t},\n\tSelectProduct:()=>{\n\t\tstoreValue('key_SelectedProduct', SelectProduct.selectedRow.id);\n\t\tcloseModal('Modal_ProductSearch');\n\t\tGetProductById.run();\n\t\tJSObject1.GetAliases(); \n\t}\n}",
    "variables": []
  },
  "id": "ProductAlias_JSObject1",
  "deleted": false,
  "gitSyncId": "61ae2cefd3e4214454c24ccd_61c4343ce89bc475f3cd179b"
}